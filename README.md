# San Joaquin Valley corpus: data processing and analysis code for 'Burstiness and Interpersonal Foraging Betweeen Human Infants and Caregivers in the Vocal Domain' and associated projects  

***Please direct all questions about the code in this repository to ritwika@ucmerced.edu***  

This directory contains code that does the following:
- extracts, cleans, processes, and analyses day-long recordings of infant and adult caregiver vocalisations for the paper 'Burstiness and Interpersonal Foraging Betweeen Human Infants and Caregivers in the Vocal Domain', the [pre-print](https://arxiv.org/abs/2505.01545) for the same paper, and associated projects
- performs validation of the LENA automatic labelling using human listener-labelled data
- plots all figures in the paper 'Burstiness and Interpersonal Foraging Betweeen Human Infants and Caregivers in the Vocal Domain' and associated supplementary file

Languages: MATLAB (R2024b), R (version 4.2.0 (2022-04-22) -- "Vigorous Calisthenics"), Bash, Perl

Audio, `.its` files, and other relevant files for recordings for participants who gave permission for their data to be shared are available on [HomeBank](https://doi.org/10.21415/T54S3C). De-identified time series data and all downstream analyses and processing outputs are available for all participants for day-long LENA labelled data, 5-minute human listener labelled data, and the corresponding LENA-labelled subset are available on the [OSF repository](https://osf.io/5xp7z/) associated with this project. Raw `.eaf` files for the human listener annotations are not publicly shared.

##  

`Metadata_CodeAndFiles.xlsx` lists all executable scripts and points them to the files they generate (sheet `DataAndResultsFileOps` for data and results file outputs, sheet `MetadataOps` for metadata file outputs). This excel file also indicates the directories these files are located in (shared in the [OSF repository](https://osf.io/5xp7z/) associated with this project), whether or not they are shared publicly, and the figure/table/supplementary section in the Burstiness paper/pre-print they are associated with. Further, the sheet `DataOrganisation` outlines the data organisation structure in this project which is reflected in the [OSF repository](https://osf.io/5xp7z/) associated with this project. 

`README_FileAndDirectoryDetails.docx` contains detailed descriptions of all data, results, and metadata folders and files associated with this project. Together, `README_FileAndDirectoryDetails.docx` and `Metadata_CodeAndFiles.xlsx` provide a comprehensive map that links the code shared in this Github repository to the files and figures generated by the code. 

`SchematicsForFigs.pptx` contains drafts for schematic figures presented in the main text and supplementary info for the Burstiness paper/pre-print.

## 

Data files with potentially identifying information are not available publicly. As such, some code in the `A1_LENADataProcessing` and `A2_HUMLabelDataCleanUp` folders are only provided to orient the reader since the data to run some scripts are not publicly shared. See the OSF repository associated with this project for all publicly shared data and metadata files associated with this project. For details on output files for each executable script (and which of those output files are shared publicly) as well as data organisation, see `Metadata_CodeAndFiles.xlsx` and `README_FileAndDirectoryDetails.docx` (available in this repository as well as in the associated OSF repository).

The directory names are indexed as A1, A2, etc. to indicate the suggested order to follow. See relevant `README` files in each directory for details about directory contents. See below for a broad overview of the contents of each directory.

Within each directory, sub-directories and/or files are also indexed with prefixes A1, A2, etc. to indicate the order of execution to follow. Some of these are recommendations but most are necessary because later scripts require outputs from previous scripts. Within directories, files with the prefixes A1, A2, etc. are executables, while all other files are supporting functions. 

Some processing scripts before `A4_DataAnalysis` will write output files only if the file does not exist in the specified location. As such, I recommend deleting or moving previously existing files before executing scripts in folders before `A4_DataAnalysis`.

##

`A1_LENADataProcessing` contains code to extract LENA labels as well as acoustics from `.wav` and `.its` files (MATLAB, Bash, and R). Code in this directory also generates a metadata file for the LENA data. Files with prefixes A1-A7 require access to data that has potentially identifying information and hence, is only provided to orient the reader, since access to this data is restricted. The final processed data obtained from the pipeline in this directory can be found in the [OSF repository](https://osf.io/5xp7z/) associated with this project.

`A2_HUMLabelDataCleanUp` contains code to clean up human listener annotated data (R, MATLAB, Bash, and Perl). Data required to execute scripts in this directory as well as all output files contain potentially identifying information. As such, these data/files are not shared publicly and the code is only provided to orient the reader.  

`A3_HUMLabelDataProcessing` contains code (MATLAB) to extract human listener labels and acoustics of labelled vocalisations from cleaned-up human listener annotation files (`.eaf` files). Code in `A2_HUMLabelDataCleanUp` and `A1_LENADataProcessing` MUST be executed before executing code in this directory. If you have cleaned up `.eaf` files, you can also work directly with those in lieu of executing code in `A2_HUMLabelDataCleanUp`. The final processed data obtained from the pipeline in this directory can be found in the [OSF repository](https://osf.io/5xp7z/) associated with this project.

`A4_DataAnalysis` contains code (R, MATLAB) to analyse data presented in the Burstiness paper and associated supplementary file. 

`A5_Plotting` contains code (MATLAB) to generate plots presented in the Burstiness paper and associated supplementary file.

##
Please make sure that all paths are correct before executing scripts. 

To the best of the author's knowledge, lines of code where paths might need changing or other important notes are present have been demarcated by `%-------------------------------------------` (in MATLAB) or `#########################################################` (in R) above and below the block of code/comments that require the reader's attention. 
##

Some notes about terminology used in the code:  
- The terms IEI and IVI are used interchangeably to mean inter-event intervals (as described in the Burstiness paper and pre-print) and equivalently, inter-vocalisation intervals, in that the relevant events are vocalisations.
- The Burstiness paper and pre-print use the short-hands `ChSp` (infant speech-related), `ChNsp` (infant non-speech-realated), and `Ad` (adult) for vocalisation types analysed in or relevant to the study. Throughout the code, however, these vocalisations are indicated using the short-hands `CHNSP` (infant speech-related), `CHNNSP` (infant non-speech-realated), and `AN` (adult). In addition, `CHN` indicates the combined `CHNSP` (infant speech-related) and `CHNNSP` (infant non-speech-realated) category.


